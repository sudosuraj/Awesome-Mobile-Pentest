// Define the target class and method to hook
var targetClass = "WKWebView"; // Change to "UIWebView" for UIWebView
var targetMethod = "- evaluateJavaScript:completionHandler:";

// Find the class using the Objective-C runtime
var webViewClass = ObjC.classes[targetClass];

if (webViewClass) {
    // Hook the evaluateJavaScript:completionHandler: method
    var evaluateJavaScriptMethod = webViewClass[targetMethod];

    Interceptor.attach(evaluateJavaScriptMethod.implementation, {
        onEnter: function (args) {
            // Extract the JavaScript code to be executed from args[2]
            var jsCode = ObjC.Object(args[2]).toString();

            // Log the JavaScript code
            console.log("JavaScript code to be executed: " + jsCode);

            // Modify the JavaScript code if needed
            // For example, you can replace or append code here

            // Execute the original method by calling its completionHandler
            var completionHandler = new ObjC.Block(args[3]);
            completionHandler.implementation(args[0], args[1]);
        }
    });
} else {
    console.log(targetClass + " class not found.");
}
